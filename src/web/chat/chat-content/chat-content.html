<section class="chat-content">
  <div class="chat-content__title">
    <md-progress-linear ng-if="$ctrl.isWait"
      class="chat-content__title-progress"
      md-mode="indeterminate">
    </md-progress-linear>

    <div class="chat-content__title-avatar"
      ng-class="{'hex2Mask': $ctrl.chat.isGroup, 'hexMask': !$ctrl.chat.isGroup}"
      ng-style="{'background-color': $ctrl.chat.color}">
      <div ng-if="!$ctrl.chat.isGroup"
        class="chat-content__title-avatar-initials"
        ng-style="{'color': $ctrl.invertColor($ctrl.chat.color)}">
        {{::$ctrl.chat.initials}}
      </div>
      <ng-md-icon ng-if="$ctrl.chat.isGroup"
        class="chat-content__title-avatar-icon"
        ng-style="{'fill': $ctrl.invertColor($ctrl.chat.color)}"
        icon="group"
        size="16">
      </ng-md-icon>
    </div>

    <div class="chat-content__title-name">
      <div class="chat-content__title-name-text">
        {{::$ctrl.chat.name}}
      </div>
      <div class="chat-content__title-name-info">
        Last post {{$ctrl.getTimeStr($ctrl.chat.timestamp)}}
      </div>
    </div>

    <div class="chat-content__title-action">
      <md-button class="md-icon-button"
        aria-label="Favorite"
        ng-disabled="true">
        <ng-md-icon icon="favorite_border"></ng-md-icon>
      </md-button>
      <md-button class="md-icon-button"
        aria-label="Add"
        ng-disabled="true">
        <ng-md-icon icon="group_add"></ng-md-icon>
      </md-button>
      <md-button class="md-icon-button"
        aria-label="Error"
        ng-disabled="true">
        <ng-md-icon icon="error"></ng-md-icon>
      </md-button>
      <md-menu md-position-mode="target-right target"
        md-offset="0 45">
        <md-button aria-label="settings"
          class="settings-btn"
          ng-click="$ctrl.openSettings($mdMenu, $event)">
          <span>Settings</span>
        </md-button>
        <md-menu-content width="4">
          <md-menu-item class="settings-item">
            <md-button ng-click="$ctrl.deleteChat()">
              Delete chat
            </md-button>
          </md-menu-item>
          <md-menu-item class="settings-item">
            <md-button ng-click="">
              Item 2
            </md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>
    </div>


  </div>

  <div class="chat-content__body">
    <div ng-repeat="msg in $ctrl.displayedMessages track by $index"
      class="chat-content__body-item">
      <chat-content-msg
        is-group="$ctrl.chat.isGroup"
        msg="msg"
        is-same-creator="$ctrl.isSameCreator($index)"
        prev-timestamp="$ctrl.getPrevTimestamp($index)">
      </chat-content-msg>
    </div>

  </div>

  <chat-msg-create msg-out-stream="$ctrl.msgOutStream"
    msg-out-change-stream="$ctrl.msgOutChangeStream"
    chat-id="$ctrl.chatId">
  </chat-msg-create>

</section>
