## События внутри 3NClient
***

**client_toCloseSidenav**  
Событие стоит "запускать" при необходимости принудительно закрыть правое боковое меню.  
Событие "отлавливается" в ` basis ` компоненте.

**client_beforeCloseSidenav**  
Событие стоит "запускать" при необходимости выполнить какие-то действия (функции) перед закрытием правого бокового меню.  
Событие "отлавливается" в ` nav-folder-list ` компоненте.  

**client_messageAction**  
Служебное событие.  
"Запускается" из контроллера компонента `folder`. С помощью событие происходит "передача" в контроллер компонента `message` информации о том, какое действие над выбранным сообщением необходимо осуществить.  

**client_msgMapChanged**  
Событие стоит "запускать" при внесении изменения в `файл message-mail.json` и соответствующий объект в памяти приложения.  
Событие "отлавливается" в контроллере `folder` компонента.  

**client_changeNotifications**  
Событие "запускается" в `notofocations-srv` при добавлении нового notification, "отлавливается" в контроллере `notification` компонента.  

**client_mustSelectMessage**  
Событие "запускается" из контроллера компонента `notification` при осуществлении перехода на сообщение в случае, если сообщение находится в той же почтовой папке, что сейчас выбрана. Событие "отлавливается" в контроллере компонента `folder` и запускает функцию выбора сообщения.  



## Отправка сообщений  
***  

В контроллере компонента ` message ` должна происходить запись (если отправляем новое, только что созданное сообщение) или перемещение (для сообщений ранее сохраненных в папке DRAFT) в папку OUTBOX. При этом также ID этого сообщения помещается в конец очереди отправки.  
Далее "запускаем" событие `toSendMessage`, которое инициирует процедуру (функцию) отправки сообщения.  
"Внутри" процедуры отправки происходит проверка очереди отправки (содержимого массива) и если других сообщений нет, то начинается отправка только что "попавшего в очередь" сообщения.  
Далее процедура может "пойти" по 2-м ветвям, в зависимости от результатов отправки сообщения.   
1. Сообщение отправлено удачно.  
1.1. ID сообщения "изымается" из очереди отправки.
1.2. Отправленное сообщение "перемещается" в папку SENT.  
1.3. Происходит проверка очереди отправки и, если она не пустая, то "запускаем" событие `toSendMessage`, что в свою очередь инициирует процедуру отправки следующего в очереди сообщения.
2. Сообщение отправлено не удачно.  
2.1. ID сообщения "изымается" из очереди отправки.  
2.2. Генерится сообщение (notification) об ошибке (активное или пассивное).  
2.3. Сообщение "перемещается" в папку DRAFT.  
2.4. Происходит проверка очереди отправки и, если она не пустая, то "запускаем" событие `toSendMessage`, что в свою очередь инициирует процедуру отправки следующего в очереди сообщения.
